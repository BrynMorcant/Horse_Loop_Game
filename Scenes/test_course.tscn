[gd_scene load_steps=17 format=3 uid="uid://4ves6wjgptxg"]

[ext_resource type="Texture2D" uid="uid://bmmsj3hfaho3o" path="res://Stages/BIGGER Loop.png" id="1_3iic1"]
[ext_resource type="PackedScene" uid="uid://bmy88qlycu816" path="res://Scenes/loop_run_interface.tscn" id="2_0pg6a"]
[ext_resource type="Script" uid="uid://bluxohpwjajin" path="res://Scripts/OnTheRailsHorsey.gd" id="2_ryj1c"]
[ext_resource type="PackedScene" uid="uid://j11oaocpqpri" path="res://Scenes/horse.tscn" id="4_gvjws"]
[ext_resource type="Script" uid="uid://clgg12en6h6ry" path="res://Scripts/horse_upgrades.gd" id="6_8nnxx"]
[ext_resource type="Texture2D" uid="uid://naboyrodc56e" path="res://Stages/BIGGER Loop foreground.png" id="6_qnpiy"]
[ext_resource type="PackedScene" uid="uid://d2mby6wejupq3" path="res://Scenes/loop_manager.tscn" id="7_1yneb"]
[ext_resource type="Texture2D" uid="uid://0x1iwark4dcb" path="res://Stages/BIGGER Loop Floorground.png" id="7_crv7u"]
[ext_resource type="Texture2D" uid="uid://c8sdsdbyvxhe7" path="res://Sprites/gregthemerchant.png" id="9_gmh8d"]
[ext_resource type="Texture2D" uid="uid://bhj4euygu7688" path="res://Sprites/fan_upgrade.png" id="10_cpp3a"]
[ext_resource type="Texture2D" uid="uid://ivionw0t3up6" path="res://Sprites/skates_upgrade.png" id="11_b3eil"]
[ext_resource type="Texture2D" uid="uid://dm46r55l2n8df" path="res://Sprites/rocket_upgrade.png" id="12_qs6xs"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_gvjws"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_s347w"]

[sub_resource type="Curve2D" id="Curve2D_7tol0"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 168, 22, 0, 0, 0, 0, 206, 17, 0, 0, 0, 0, 288, 21, 0, 0, 0, 0, 419, 16, 0, 0, 0, 0, 498, 27, 0, 0, 0, 0, 561, 25, 0, 0, 0, 0, 665, 20, 0, 0, 0, 0, 696, 17, 0, 0, 0, 0, 717, 17, 0, 0, 0, 0, 737, 11, 0, 0, 0, 0, 754, -1, 0, 0, 0, 0, 762, -16, 0, 0, 0, 0, 765, -31, 0, 0, 0, 0, 764, -47, 0, 0, 0, 0, 755, -64, 0, 0, 0, 0, 741, -78, 0, 0, 0, 0, 721, -87, 0, 0, 0, 0, 703, -86, 0, 0, 0, 0, 684, -77, 0, 0, 0, 0, 669, -66, 0, 0, 0, 0, 662, -55, 0, 0, 0, 0, 659, -40, 0, 0, 0, 0, 660, -21, 0, 0, 0, 0, 669, -3, 0, 0, 0, 0, 685, 11, 0, 0, 0, 0, 709, 18, 0, 0, 0, 0, 763, 17, 0, 0, 0, 0, 796, 14, 0, 0, 0, 0, 851, 18, 0, 0, 0, 0, 908, 18, 0, 0, 0, 0, 986, 23, 0, 0, 0, 0, 1085, 22, 0, 0, 0, 0, 1130, 19, 0, 0, 0, 0, 1218, -12, 0, 0, 0, 0, 1265, -32, 0, 0, 0, 0, 1328, -23, 0, 0, 0, 0, 1427, 4, 0, 0, 0, 0, 1547, 12, 0, 0, 0, 0, 1626, 17, 0, 0, 0, 0, 1720, 14, 0, 0, 0, 0, 1783, 20, 0, 0, 0, 0, 1852, 13, 0, 0, 0, 0, 1936, 16, 0, 0, 0, 0, 2015, 13, 0, 0, 0, 0, 2108, 6, 0, 0, 0, 0, 2148, -4, 0, 0, 0, 0, 2182, -18, 0, 0, 0, 0, 2210, -37, 0, 0, 0, 0, 2232, -59, 0, 0, 0, 0, 2249, -81, 0, 0, 0, 0, 2261, -103, 0, 0, 0, 0, 2270, -125, 0, 0, 0, 0, 2277, -149, 0, 0, 0, 0, 2281, -176, 0, 0, 0, 0, 2282, -204, 0, 0, 0, 0, 2277, -233, 0, 0, 0, 0, 2269, -262, 0, 0, 0, 0, 2257, -287, 0, 0, 0, 0, 2242, -310, 0, 0, 0, 0, 2225, -330, 0, 0, 0, 0, 2202, -350, 0, 0, 0, 0, 2176, -368, 0, 0, 0, 0, 2152, -378, 0, 0, 0, 0, 2121, -387, 0, 0, 0, 0, 2096, -391, 0, 0, 0, 0, 2066, -390, 0, 0, 0, 0, 2035, -385, 0, 0, 0, 0, 2008, -376, 0, 0, 0, 0, 1979, -363, 0, 0, 0, 0, 1956, -346, 0, 0, 0, 0, 1936, -326, 0, 0, 0, 0, 1919, -304, 0, 0, 0, 0, 1903, -277, 0, 0, 0, 0, 1892, -250, 0, 0, 0, 0, 1885, -219, 0, 0, 0, 0, 1883, -184, 0, 0, 0, 0, 1887, -151, 0, 0, 0, 0, 1896, -119, 0, 0, 0, 0, 1912, -86, 0, 0, 0, 0, 1929, -63, 0, 0, 0, 0, 1952, -39, 0, 0, 0, 0, 1980, -19, 0, 0, 0, 0, 2013, -4, 0, 0, 0, 0, 2051, 6, 0, 0, 0, 0, 2112, 18, 0, 0, 0, 0, 2223, 17, 0, 0, 0, 0, 2363, 19, 0, 0, 0, 0, 2509, 17, 0, 0, 0, 0, 2619, 18, 0, 0, 0, 0, 2698, 19, 0, 0, 0, 0, 2783, 24, 0, 0, 0, 0, 2848, 18, 0, 0, 0, 0, 2938, 25, 0, 0, 0, 0, 3044, 18, 0, 0, 0, 0, 3143, 20, 0, 0, 0, 0, 3273, 20, 0, 0, 0, 0, 3357, 22, 0, 0, 0, 0, 3426, 15, 0, 0, 0, 0, 3473, 22, 0, 0, 0, 0, 3558, 22, 0, 0, 0, 0, 3640, 19, 0, 0, 0, 0, 3722, 22, 0, 0, 0, 0, 3790, 16, 0, 0, 0, 0, 3946, 15, 0, 0, 0, 0, 3995, 16, 0, 0, 0, 0, 4056, 21, 0, 0, 0, 0, 4200, 13, 0, 0, 0, 0, 4282, -8, 0, 0, 0, 0, 4341, -34, 0, 0, 0, 0, 4389, -63, 0, 0, 0, 0, 4429, -93, 0, 0, 0, 0, 4462, -124, 0, 0, 0, 0, 4499, -164, 0, 0, 0, 0, 4534, -216, 0, 0, 0, 0, 4561, -270, 0, 0, 0, 0, 4580, -326, 0, 0, 0, 0, 4595, -386, 0, 0, 0, 0, 4599, -447, 0, 0, 0, 0, 4597, -503, 0, 0, 0, 0, 4587, -566, 0, 0, 0, 0, 4573, -617, 0, 0, 0, 0, 4547, -673, 0, 0, 0, 0, 4521, -719, 0, 0, 0, 0, 4489, -766, 0, 0, 0, 0, 4452, -807, 0, 0, 0, 0, 4402, -849, 0, 0, 0, 0, 4339, -886, 0, 0, 0, 0, 4249, -924, 0, 0, 0, 0, 4179, -934, 0, 0, 0, 0, 4111, -935, 0, 0, 0, 0, 4032, -927, 0, 0, 0, 0, 3972, -910, 0, 0, 0, 0, 3908, -881, 0, 0, 0, 0, 3836, -840, 0, 0, 0, 0, 3787, -795, 0, 0, 0, 0, 3746, -752, 0, 0, 0, 0, 3719, -712, 0, 0, 0, 0, 3694, -667, 0, 0, 0, 0, 3671, -611, 0, 0, 0, 0, 3656, -561, 0, 0, 0, 0, 3647, -497, 0, 0, 0, 0, 3645, -438, 0, 0, 0, 0, 3655, -365, 0, 0, 0, 0, 3671, -302, 0, 0, 0, 0, 3707, -222, 0, 0, 0, 0, 3751, -157, 0, 0, 0, 0, 3809, -97, 0, 0, 0, 0, 3881, -45, 0, 0, 0, 0, 3962, -6, 0, 0, 0, 0, 4035, 14, 0, 0, 0, 0, 4088, 14, 0, 0, 0, 0, 4312, -4, 0, 0, 0, 0, 4485, -30, 0, 0, 0, 0, 4617, -16, 0, 0, 0, 0, 4872, -24, 0, 0, 0, 0, 4930, 0, 0, 0, 0, 0, 5009, 9, 0, 0, 0, 0, 5089, 5, 0, 0, 0, 0, 5208, 18, 0, 0, 0, 0, 5272, 14, 0, 0, 0, 0, 5303, 13, 0, 0, 0, 0, 5342, 15, 0, 0, 0, 0, 5389, 12, 0, 0, 0, 0, 5438, 2, 0, 0, 0, 0, 5481, -10, 0, 0, 0, 0, 5481, -10, 0, 0, 0, 0, 5584, -43, 0, 0, 0, 0, 5741, -151, 0, 0, 0, 0, 5890, -253, 0, 0, 0, 0, 6039, -408, 0, 0, 0, 0, 6182, -562, 0, 0, 0, 0, 6353, -767, 0, 0, 0, 0, 6468, -951, 0, 0, 0, 0, 6560, -1188, 0, 0, 0, 0, 6606, -1343, 0, 0, 0, 0, 6619, -1470, 0, 0, 0, 0, 6543, -1756, 0, 0, 0, 0, 6389, -1994, 0, 0, 0, 0, 6126, -2102, 0, 0, 0, 0, 5821, -2136)
}
point_count = 180

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_kbrw5"]
distance = -256.0

[node name="Test Course" type="Node2D"]

[node name="Background" type="TextureRect" parent="."]
offset_left = -786.0
offset_top = -561.0
offset_right = 5214.0
offset_bottom = 2439.0
texture = ExtResource("1_3iic1")

[node name="loop_manager" parent="." instance=ExtResource("7_1yneb")]
position = Vector2(273, 2006)
rotation = -0.0389413

[node name="Area2D" parent="loop_manager" index="0"]
collision_layer = 8

[node name="CollisionShape2D" parent="loop_manager/Area2D" index="0"]
position = Vector2(-216.654, 12.5749)

[node name="CollisionShape2D2" type="CollisionShape2D" parent="loop_manager/Area2D" index="1"]
position = Vector2(-154.402, -44.0445)
rotation = 1.6224
shape = SubResource("CapsuleShape2D_gvjws")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="loop_manager/Area2D" index="2"]
position = Vector2(-231.279, -100.08)
rotation = 2.71167
shape = SubResource("CapsuleShape2D_gvjws")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="loop_manager/Area2D" index="3"]
position = Vector2(1135.79, 53.2583)
shape = SubResource("CapsuleShape2D_s347w")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="loop_manager/Area2D" index="4"]
position = Vector2(1367.44, -138.869)
rotation = 1.6224
shape = SubResource("CapsuleShape2D_gvjws")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="loop_manager/Area2D" index="5"]
position = Vector2(1018.28, -295.581)
rotation = 2.35619
shape = SubResource("CapsuleShape2D_gvjws")

[node name="CollisionShape2D7" type="CollisionShape2D" parent="loop_manager/Area2D" index="6"]
position = Vector2(3190.92, 141.334)
shape = SubResource("CapsuleShape2D_s347w")

[node name="CollisionShape2D8" type="CollisionShape2D" parent="loop_manager/Area2D" index="7"]
position = Vector2(3688.07, -289.637)
rotation = 1.6224
shape = SubResource("CapsuleShape2D_gvjws")

[node name="CollisionShape2D9" type="CollisionShape2D" parent="loop_manager/Area2D" index="8"]
position = Vector2(2855.05, -639.333)
rotation = 2.35619
shape = SubResource("CapsuleShape2D_gvjws")

[node name="Path2D" type="Path2D" parent="."]
position = Vector2(-654, 2005)
curve = SubResource("Curve2D_7tol0")

[node name="PathFollow2D" type="PathFollow2D" parent="Path2D" node_paths=PackedStringArray("horse_ui")]
position = Vector2(168, 22)
rotation = -0.130827
script = ExtResource("2_ryj1c")
horse_ui = NodePath("Test_Horse/Camera2D/Loop_Run_Interface")

[node name="Test_Horse" parent="Path2D/PathFollow2D" instance=ExtResource("4_gvjws")]

[node name="RocketLoopBase" parent="Path2D/PathFollow2D/Test_Horse/AnimatedSprite2D" index="4"]
volume_db = 0.0
pitch_scale = 1.0

[node name="RocketLoopAirDistortion" parent="Path2D/PathFollow2D/Test_Horse/AnimatedSprite2D" index="5"]
pitch_scale = 1.0

[node name="FanLoop" parent="Path2D/PathFollow2D/Test_Horse/AnimatedSprite2D" index="6"]
pitch_scale = 1.0

[node name="Camera2D" type="Camera2D" parent="Path2D/PathFollow2D/Test_Horse"]
position = Vector2(-0.374817, -9.9928)
zoom = Vector2(2, 2)
position_smoothing_enabled = true
position_smoothing_speed = 15.0

[node name="Loop_Run_Interface" parent="Path2D/PathFollow2D/Test_Horse/Camera2D" instance=ExtResource("2_0pg6a")]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -79.6721
offset_top = -117.54
offset_right = -79.6721
offset_bottom = -117.54

[node name="TextureRect" type="TextureRect" parent="."]
offset_left = -786.0
offset_top = -561.0
offset_right = 6714.0
offset_bottom = 2439.0
texture = ExtResource("6_qnpiy")

[node name="TextureRect2" type="TextureRect" parent="."]
offset_left = -786.0
offset_top = -589.0
offset_right = 6714.0
offset_bottom = 2411.0
texture = ExtResource("7_crv7u")

[node name="horse_upgrades" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(-486, 2027)
rotation = -0.130827
script = ExtResource("6_8nnxx")

[node name="Halftime_Show" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Victory" type="Button" parent="Halftime_Show"]
layout_mode = 0
offset_left = 5140.0
offset_top = -93.0
offset_right = 5194.0
offset_bottom = -62.0
text = "Finish"

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(2854, 1958)

[node name="WorldFloor" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2(-1271, -166)
shape = SubResource("WorldBoundaryShape2D_kbrw5")

[node name="Victory_Timer" type="Timer" parent="."]
wait_time = 4.0
one_shot = true

[node name="Fail_Timer" type="Timer" parent="."]
wait_time = 4.0
one_shot = true

[node name="Gregthemerchant" type="Sprite2D" parent="."]
position = Vector2(-604, 1953)
scale = Vector2(0.75, 0.75)
texture = ExtResource("9_gmh8d")

[node name="fan" type="TextureButton" parent="Gregthemerchant"]
offset_left = -53.3333
offset_top = 13.3333
offset_right = -13.3333
offset_bottom = 53.3333
texture_normal = ExtResource("10_cpp3a")
texture_pressed = ExtResource("10_cpp3a")
texture_hover = ExtResource("10_cpp3a")
texture_disabled = ExtResource("10_cpp3a")
texture_focused = ExtResource("10_cpp3a")

[node name="skates" type="TextureButton" parent="Gregthemerchant"]
offset_left = -21.3333
offset_top = 10.6667
offset_right = 18.6667
offset_bottom = 50.6667
texture_normal = ExtResource("11_b3eil")
texture_pressed = ExtResource("11_b3eil")
texture_hover = ExtResource("11_b3eil")
texture_disabled = ExtResource("11_b3eil")
texture_focused = ExtResource("11_b3eil")

[node name="rocket" type="TextureButton" parent="Gregthemerchant"]
offset_left = 14.6667
offset_top = 6.66667
offset_right = 54.6667
offset_bottom = 46.6667
texture_normal = ExtResource("12_qs6xs")
texture_pressed = ExtResource("12_qs6xs")
texture_hover = ExtResource("12_qs6xs")
texture_disabled = ExtResource("12_qs6xs")
texture_focused = ExtResource("12_qs6xs")

[node name="RichTextLabel" type="RichTextLabel" parent="Gregthemerchant"]
offset_left = 73.3333
offset_top = -70.6667
offset_right = 237.333
offset_bottom = 27.3333
text = "'Ello, oim Greg
I sell 'orse upgrades."
horizontal_alignment = 1
vertical_alignment = 1

[connection signal="pressed" from="Halftime_Show/Victory" to="Path2D/PathFollow2D" method="_on_victory_pressed"]
[connection signal="timeout" from="Victory_Timer" to="Path2D/PathFollow2D" method="_on_victory_timer_timeout"]
[connection signal="timeout" from="Fail_Timer" to="Path2D/PathFollow2D" method="_on_fail_timer_timeout"]
[connection signal="pressed" from="Gregthemerchant/fan" to="horse_upgrades" method="_on_fan_pressed"]
[connection signal="pressed" from="Gregthemerchant/skates" to="horse_upgrades" method="_on_skates_pressed"]
[connection signal="pressed" from="Gregthemerchant/rocket" to="horse_upgrades" method="_on_rocket_pressed"]

[editable path="loop_manager"]
[editable path="Path2D/PathFollow2D/Test_Horse"]
